<h4>
  <a routerLink="/chat">&laquo; Go back to lobby</a>
</h4>
<div *ngIf="user else showLoginMsg">
  <div *ngIf="activeChatChannel else show404Msg">
    <h3>Chatting in {{ activeChatChannel.name }}</h3>
    <!-- <label for="chk">Show timestamp</label>
        <input name="chk" type="checkbox" [(ngModel)]="showTimestamp"> -->
    <button (click)="scroll()" *ngIf="user && user.admin" title="This is a temporary button, don't worry">Scroll down</button>
    <div class="chatContainer" id="chatContainer">
      <div class="msg" *ngFor="let msg of chatMsgs">
        <strong [ngStyle]="{ 'color': msg.userColour }">{{ msg.sender }}:</strong> {{ msg.content }}
        <a class="delete" (click)="deleteItem(msg.id)" *ngIf="user && user.admin">
          <i class="fa fa-trash-o"></i>
        </a>
        <div class="time">{{ printTime(msg.time) }}</div>
      </div>
      <div id="bottom">&nbsp;</div>
    </div>
    <!-- {{ scroll() }} -->
    <form>
      <input type="text" class="newMsg" autofocus required [(ngModel)]="newMsg" name="newMsg" autocomplete="off">
      <br>
      <input type="submit" (click)="addMsg()" value="Send">
      <input type="submit" (click)="newMsg = undefined" value="Clear">
    </form>
  </div>
</div>

<ng-template #showLoginMsg>
  You have to sign in to be able to chat
  <br>
  <br>
  <button type="menu" (click)="authService.googleLogin()">Sign in with google</button>
  <br>
  <br>
  <button (click)="anonymousLogin = true" *ngIf="!anonymousLogin">Sign in anonymously</button>

  <div class="box" *ngIf="anonymousLogin">
    <h4>Sign in anonymously</h4>
    <input type="text" placeholder="Enter desired username" [(ngModel)]="username">
    <button (click)="authService.anonymousLogin(username); username = undefined;">Log in</button>
    <button (click)="anonymousLogin = false; username = undefined;">Cancel</button>
  </div>
</ng-template>

<ng-template #show404Msg>
  Four, oh four; page not found
</ng-template>